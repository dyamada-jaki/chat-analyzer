# ğŸ³ Docker & Dev Container ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

## æ¦‚è¦
Chat Analyzerãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å®Œå…¨ã«ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã•ã‚ŒãŸé–‹ç™ºç’°å¢ƒã‚’æä¾›ã—ã¾ã™ã€‚Dev Containerï¼ˆVSCodeï¼‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒãƒ¼ãƒ å…¨ä½“ã§çµ±ä¸€ã•ã‚ŒãŸé–‹ç™ºç’°å¢ƒã‚’å®Ÿç¾ã§ãã¾ã™ã€‚

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚³ãƒ³ãƒ†ãƒŠæ§‹æˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dev Container (VSCodeçµ±åˆç’°å¢ƒ)                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Frontend    â”‚ â”‚ Backend     â”‚ â”‚ Database    â”‚ â”‚
â”‚ â”‚ Vue 3       â”‚ â”‚ Node.js     â”‚ â”‚ PostgreSQL  â”‚ â”‚
â”‚ â”‚ Vite        â”‚ â”‚ Express     â”‚ â”‚ (Optional)  â”‚ â”‚
â”‚ â”‚ :3000       â”‚ â”‚ :8000       â”‚ â”‚ :5432       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§
- **Frontend**: Vue 3 + TypeScript + Vite (ãƒãƒ¼ãƒˆ: 3000)
- **Backend**: Node.js + Express + TypeScript (ãƒãƒ¼ãƒˆ: 8000)
- **Database**: PostgreSQL (ãƒãƒ¼ãƒˆ: 5432) â€»å°†æ¥çš„ã«ä½¿ç”¨äºˆå®š
- **Redis**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥ (ãƒãƒ¼ãƒˆ: 6379) â€»å°†æ¥çš„ã«ä½¿ç”¨äºˆå®š

## ğŸ“‹ äº‹å‰æº–å‚™

### å¿…é ˆã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢
- **Docker Desktop**: [ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰](https://docs.docker.com/desktop/)
- **Visual Studio Code**: [ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://code.visualstudio.com/)
- **Dev Containersæ‹¡å¼µ**: [ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers)

### æ¨å¥¨æ‹¡å¼µæ©Ÿèƒ½
- Vue Language Features (Volar)
- TypeScript Hero
- Prettier - Code formatter
- ESLint
- Docker

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
```bash
git clone <repository-url> chat-analyzer
cd chat-analyzer
```

### 2. VSCodeã§Dev Containerã‚’é–‹ã
```bash
# VSCodeã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ã
code .

# Command Palette (Cmd/Ctrl + Shift + P) ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œ:
# "Dev Containers: Reopen in Container"
```

### 3. åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆã‚³ãƒ³ãƒ†ãƒŠå†…ã§å®Ÿè¡Œï¼‰
```bash
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd frontend
pnpm install

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd ../backend
pnpm install

# ç’°å¢ƒå¤‰æ•°è¨­å®š
cp .env.example .env
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦APIí‚¤ã‚’è¨­å®š
```

### 4. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§å…¨ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•
docker-compose up

# ã¾ãŸã¯å€‹åˆ¥èµ·å‹•
cd frontend && pnpm dev  # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
cd backend && pnpm dev   # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
```

### 5. å‹•ä½œç¢ºèª
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: http://localhost:3000
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API**: http://localhost:8000
- **APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: http://localhost:8000/docs (äºˆå®š)

## ğŸ—‚ï¸ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

### ä¸»è¦ãªè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
```
chat-analyzer/
â”œâ”€â”€ .devcontainer/
â”‚   â”œâ”€â”€ devcontainer.json      # Dev Containerè¨­å®š
â”‚   â”œâ”€â”€ Dockerfile.dev         # é–‹ç™ºç”¨Dockerè¨­å®š
â”‚   â””â”€â”€ docker-compose.yml     # é–‹ç™ºç’°å¢ƒæ§‹æˆ
â”œâ”€â”€ docker-compose.yml         # æœ¬ç•ªç”¨æ§‹æˆ
â”œâ”€â”€ docker-compose.dev.yml     # é–‹ç™ºç”¨æ§‹æˆ
â””â”€â”€ README.md
```

### ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«
```bash
# backend/.env
GOOGLE_CHAT_API_KEY=your_api_key
GEMINI_API_KEY=your_gemini_key
GOOGLE_CLIENT_ID=your_client_id
GOOGLE_CLIENT_SECRET=your_client_secret
DATABASE_URL=postgresql://user:pass@db:5432/chatanalyzer
REDIS_URL=redis://redis:6379
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ã®ãƒ†ã‚¹ãƒˆ
```bash
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
cd frontend
pnpm test          # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
pnpm test:e2e      # E2Eãƒ†ã‚¹ãƒˆ

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
cd backend
pnpm test          # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
pnpm test:int      # çµ±åˆãƒ†ã‚¹ãƒˆ
```

### ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
```bash
# ãƒ†ã‚¹ãƒˆç”¨DBã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•
docker-compose -f docker-compose.test.yml up -d

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pnpm test:db
```

## ğŸ”§ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### æ—¥å¸¸çš„ãªé–‹ç™º
1. VSCodeã§Dev Containerã‚’é–‹ã
2. `docker-compose up`ã§å…¨ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•
3. ã‚³ãƒ¼ãƒ‰å¤‰æ›´ï¼ˆãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰å¯¾å¿œï¼‰
4. ãƒ–ãƒ©ã‚¦ã‚¶ã§å‹•ä½œç¢ºèª
5. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
6. Git commit & push

### æ–°æ©Ÿèƒ½é–‹ç™º
1. feature ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
2. Dev Containerç’°å¢ƒã§é–‹ç™º
3. ãƒ†ã‚¹ãƒˆä½œæˆãƒ»å®Ÿè¡Œ
4. ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼
5. main ãƒ–ãƒ©ãƒ³ãƒã«ãƒãƒ¼ã‚¸

## ğŸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

**1. ã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã—ãªã„**
```bash
# Docker DesktopãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª
docker --version

# ã‚¤ãƒ¡ãƒ¼ã‚¸ã®å†ãƒ“ãƒ«ãƒ‰
docker-compose build --no-cache
```

**2. ãƒãƒ¼ãƒˆãŒä½¿ç”¨ä¸­**
```bash
# ãƒãƒ¼ãƒˆä½¿ç”¨çŠ¶æ³ç¢ºèª
lsof -i :3000
lsof -i :8000

# ãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†
kill -9 <PID>
```

**3. ä¾å­˜é–¢ä¿‚ã®å•é¡Œ**
```bash
# node_modulesã‚’å‰Šé™¤ã—ã¦å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
rm -rf frontend/node_modules backend/node_modules
docker-compose build --no-cache
```

**4. ç’°å¢ƒå¤‰æ•°ãŒèª­ã¿è¾¼ã¾ã‚Œãªã„**
```bash
# .envãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèª
ls -la backend/.env

# ã‚³ãƒ³ãƒ†ãƒŠå†…ã®ç’°å¢ƒå¤‰æ•°ç¢ºèª
docker-compose exec backend env
```

## ğŸ“ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### ãƒãƒ¼ãƒˆå¤‰æ›´
`docker-compose.yml`ã§ãƒãƒ¼ãƒˆè¨­å®šã‚’å¤‰æ›´ã§ãã¾ã™ï¼š
```yaml
services:
  frontend:
    ports:
      - "3001:3000"  # 3001ç•ªãƒãƒ¼ãƒˆã§èµ·å‹•
```

### æ–°ã—ã„ã‚µãƒ¼ãƒ“ã‚¹è¿½åŠ 
```yaml
# docker-compose.ymlã«è¿½åŠ 
services:
  newservice:
    build: ./newservice
    ports:
      - "9000:9000"
    environment:
      - NODE_ENV=development
```

## ğŸš¢ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ
```bash
# ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç”¨ãƒ“ãƒ«ãƒ‰
docker-compose -f docker-compose.staging.yml build

# ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒèµ·å‹•
docker-compose -f docker-compose.staging.yml up -d
```

### æœ¬ç•ªç’°å¢ƒ
```bash
# æœ¬ç•ªç”¨ãƒ“ãƒ«ãƒ‰
docker-compose -f docker-compose.prod.yml build

# æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤
docker-compose -f docker-compose.prod.yml up -d
```

---

**ä½œæˆæ—¥**: 2025å¹´9æœˆ18æ—¥  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**å¯¾è±¡ç’°å¢ƒ**: Development, Staging, Production
