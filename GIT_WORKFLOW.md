# Git管理ワークフロー

## 📋 基本ルール

### 1. 会話ごとの必須コミット
- **ファイル修正があれば必ずコミット**
- 会話終了時に確実にコミット実行
- 修正内容の確実な記録

### 2. 処理ごとの個別コミット
- **1つの処理完了 = 1つのコミット**
- 処理内容に応じたコミットメッセージ
- 段階的な進捗の記録

## 🏷️ コミットメッセージ形式

### 基本形式
```
🔧 [機能名]: 具体的な修正内容

- 詳細な変更点1
- 詳細な変更点2
- 影響範囲や注意点
```

### プレフィックス例
- `🎉` 新機能・大きなマイルストーン
- `🔧` 機能修正・改善
- `🐛` バグ修正
- `💄` UI/UX改善
- `📝` ドキュメント更新
- `🧪` テスト追加・修正
- `⚡` パフォーマンス改善
- `🔒` セキュリティ修正
- `📦` 依存関係更新
- `🔀` マージ・ブランチ作業

## 📋 実装パターン例

### 単一機能の実装
```bash
# 例: Chrome拡張機能の感情アイコン表示
git commit -m "💄 UI: 感情アイコンコンポーネント作成

- 4つの感情カテゴリ (positive, negative, angry, neutral) に対応
- メッセージ要素の横にアイコンを表示
- CSS animations for smooth appearance"

git commit -m "🧠 Logic: 感情分析結果の表示ロジック追加

- 分析結果をアイコン形式で変換
- 信頼度に応じた表示制御
- 重複表示の防止機能"
```

### 複数ファイルにまたがる修正
```bash
# 例: API エンドポイント追加
git commit -m "🔧 API: 新しい感情履歴エンドポイント追加

- GET /api/emotions/history ルート追加
- 時間範囲フィルタリング機能
- フロントエンド側でのAPI呼び出し実装

Modified:
- backend/src/routes/api.ts
- frontend/src/services/emotionService.ts
- frontend/src/types/index.ts"
```

### バグ修正
```bash
git commit -m "🐛 Fix: MutationObserver重複初期化問題を修正

- ChatEmotionAnalyzerクラスの二重インスタンス化を防止
- observer存在チェックの追加
- メモリリーク防止

Fixes: Chrome拡張機能でのメッセージ検出失敗"
```

## 🔄 ワークフロー

### 開発中
1. 機能実装
2. 動作確認
3. **即座にコミット**
4. 次の機能へ

### 会話終了時
1. 全変更をレビュー
2. 未コミット分をコミット
3. プッシュ（必要に応じて）

## 📊 コミット頻度目安

- **小さな修正**: 即座にコミット
- **中規模機能**: 1-3 コミットに分割
- **大規模機能**: 5-10 コミットに分割
- **リファクタリング**: 変更範囲ごとにコミット

## 🎯 品質維持

### コミット前チェック
- [ ] 実装が完了している
- [ ] 動作テスト済み
- [ ] コミットメッセージが明確
- [ ] 変更範囲が適切

### レビューポイント
- 1コミットで1つの目的
- メッセージから変更内容が理解できる
- 後から追跡しやすい粒度
- 機能ごとの独立性維持
